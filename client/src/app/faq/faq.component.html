<div class="faq-shell">
    <!-- Header row: Title + Search (like the mockup) -->
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h1 class="faq-title mb-0">FAQ</h1>

        <div class="search-wrap">
            <div class="input-group search-group">
                <input type="text" class="form-control search-input" placeholder="Search..." [(ngModel)]="searchTerm"
                    (input)="onSearchChange()" />
                <span class="input-group-text search-icon">
                    <i class="bi bi-search"></i>
                </span>
            </div>
        </div>
    </div>

    <!-- Add FAQ (admins) -->
    <div class="mb-3 text-end" *ngIf="isAdmin()">
        <button class="btn btn-primary btn-sm" (click)="openEditModal()">Add FAQ</button>
    </div>

    <!-- FAQ list -->
    <div *ngFor="let faq of filteredFaqs" class="faq-item card mb-3" (click)="toggleFaq(faq.id)">
        <div class="faq-row">
            <div class="faq-question">
                {{ faq.question }}
            </div>
            <div class="faq-chevron">
                <i class="bi" [ngClass]="openFaqId === faq.id ? 'bi-chevron-up' : 'bi-chevron-down'"></i>
            </div>
        </div>

        <!-- Expanded content -->
        <div class="faq-body" *ngIf="openFaqId === faq.id" (click)="$event.stopPropagation()">
            <div *ngIf="faq.answer; else noAnswer">
                <p class="mb-0">{{ faq.answer }}</p>
            </div>
            <ng-template #noAnswer>
                <p class="mb-0 text-muted fst-italic">No answer yet</p>
            </ng-template>

            <!-- Admin actions bottom-right -->
            <div class="faq-actions" *ngIf="isAdmin()">
                <button class="btn btn-outline-primary btn-sm me-2" (click)="openEditModal(faq)">‚úèÔ∏è Edit</button>
                <button class="btn btn-outline-danger btn-sm" (click)="deleteFaq(faq.id)">üóëÔ∏è Delete</button>
            </div>
        </div>
    </div>

    <!-- Pagination -->
    <nav *ngIf="pagination">
        <ul class="pagination justify-content-center">
            <li class="page-item" [class.disabled]="pagination.currentPage === 1">
                <a class="page-link" (click)="pageChanged(pagination.currentPage - 1)">Previous</a>
            </li>

            <li class="page-item" *ngFor="let _ of [].constructor(pagination.totalPages); let i = index"
                [class.active]="pagination.currentPage === i + 1">
                <a class="page-link" (click)="pageChanged(i + 1)">{{ i + 1 }}</a>
            </li>

            <li class="page-item" [class.disabled]="pagination.currentPage === pagination.totalPages">
                <a class="page-link" (click)="pageChanged(pagination.currentPage + 1)">Next</a>
            </li>
        </ul>
    </nav>
</div>